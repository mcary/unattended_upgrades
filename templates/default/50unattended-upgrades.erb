// Generated by Chef
// Based on https://help.ubuntu.com/community/AutomaticSecurityUpdates

////// Suggested to put in 10periodic... //////
    // Override some vars from 10periodic
    APT::Periodic::Download-Upgradeable-Packages "1";
    APT::Periodic::AutocleanInterval "5";

    // Enable unattended upgrades
    APT::Periodic::Unattended-Upgrade "<%= @enable_upgrades ? 1 : 0 %>";
    APT::Periodic::RandomSleep "1800";
////// Suggested to put in 10periodic... //////

// Some other helpful variables
//APT::Periodic::Verbose "3";
APT::Periodic::Update-Package-Lists "1";
APT::Periodic::MaxAge "45";
APT::Periodic::MinAge "30";

////// Details of unattended uprade config

// Automatically upgrade packages from these (origin, archive) pairs
Unattended-Upgrade::Allowed-Origins {
    "<%= node[:platform] %> <%= node[:lsb][:codename] %>-security";
    "<%= node[:platform] %> <%= node[:lsb][:codename] %>-updates";
};

// List of packages to not update
Unattended-Upgrade::Package-Blacklist {
//  "vim";
//  "libc6";
//  "libc6-dev";
//  "libc6-i686";
};

// Send email to this address for problems or packages upgrades
// If empty or unset then no email is sent, make sure that you
// have a working mail setup on your system. The package 'mailx'
// must be installed or anything that provides /usr/bin/mail.
Unattended-Upgrade::Mail "<%= @upgrade_email %>";


// Automatically reboot *WITHOUT CONFIRMATION* if a
// the file /var/run/reboot-required is found after the upgrade
Unattended-Upgrade::Automatic-Reboot "<%= @auto_reboot ? 'true' : 'false' %>";
